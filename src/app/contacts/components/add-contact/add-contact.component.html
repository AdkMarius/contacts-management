<mat-card class="main-form" [formGroup]="mainForm">
  <mat-card-title>Ajout d'un contact !</mat-card-title>

  <mat-card class="form-card">

    <div class="form-row">

      <mat-form-field appearance="fill">
        <mat-label>Prénom(s)</mat-label>
        <input type="text" matInput [formControl]="firstNameCtrl">
        <mat-error>{{ getErrorFormControlMessage(firstNameCtrl) }}</mat-error>
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>Nom</mat-label>
        <input type="text" matInput [formControl]="lastNameCtrl">
        <mat-error>{{ getErrorFormControlMessage(lastNameCtrl) }}</mat-error>
      </mat-form-field>
    </div>

  </mat-card>

  <mat-card class="form-card">

    <div class="form-row">

      <mat-form-field appearance="fill">
        <mat-label>Email</mat-label>
        <input type="email" matInput [formControl]="emailCtrl">
        <mat-error>{{ getErrorFormControlMessage(emailCtrl) }}</mat-error>
      </mat-form-field>

      <mat-form-field class="example-form-field">
        <mat-label>Date de naissance</mat-label>
        <input matInput [matDatepicker]="picker" [formControl]="birthDateCtrl">
        <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
        <mat-datepicker #picker></mat-datepicker>
        <mat-error>{{ getErrorFormControlMessage(birthDateCtrl) }}</mat-error>
      </mat-form-field>
    </div>

  </mat-card>

  <mat-card class="form-card">
    <ngx-intl-tel-input class="phone-number"
      [cssClass]="'custom'"
      [preferredCountries]="preferredCountries"
      [enableAutoCountrySelect]="true"
      [enablePlaceholder]="true"
      [searchCountryFlag]="true"
      [searchCountryField]="[
          SearchCountryField.Iso2,
          SearchCountryField.Name
        ]"
      [selectFirstCountry]="false"
      [selectedCountryISO]="CountryISO.India"
      [maxLength]="20"
      [phoneValidation]="true"
      [separateDialCode]="separateDialCode"
      [numberFormat]="PhoneNumberFormat.National"
      [formControl]="phoneNumberCtrl"
    >
    </ngx-intl-tel-input>
    <mat-error *ngIf="phoneNumberCtrl.invalid && phoneNumberCtrl.value">Veuillez respecter le format !</mat-error>
  </mat-card>

  <mat-dialog-actions align="end">
    <button mat-raised-button mat-dialog-close>Annuler</button>
    <button mat-raised-button [mat-dialog-close]="true" color="primary"
            [disabled]="mainForm.invalid || loading" (click)="onValideContact()">Créer</button>
  </mat-dialog-actions>

  <mat-spinner *ngIf="loading" color="primary" mode="indeterminate"></mat-spinner>

</mat-card>

